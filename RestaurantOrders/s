-- H2 2.1.214;
SET DB_CLOSE_DELAY -1;        
;             
CREATE USER IF NOT EXISTS "SA" SALT '282e375340f5658e' HASH 'e6c757f5ac74ba39542ca9bb472e008cd04a4fdeaf15dad8512e623c34330025' ADMIN;         
CREATE SEQUENCE "PUBLIC"."SESSION_SEQ" START WITH 1 RESTART WITH 1601 INCREMENT BY 50;        
CREATE SEQUENCE "PUBLIC"."USER_SEQ" START WITH 1 RESTART WITH 1601 INCREMENT BY 50;           
CREATE MEMORY TABLE "PUBLIC"."SESSION"(
    "EXPIRES_AT" TIMESTAMP(6) NOT NULL,
    "ID" BIGINT NOT NULL,
    "USER_ID" BIGINT,
    "SESSION_TOKEN" CHARACTER VARYING(255) NOT NULL
);   
ALTER TABLE "PUBLIC"."SESSION" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_A" PRIMARY KEY("ID");      
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.SESSION; 
INSERT INTO "PUBLIC"."SESSION" VALUES
(TIMESTAMP '2023-05-28 20:29:08.105265', 1, 1, 'eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiJkYzdlY2M2ODVmMDk0M2E3ODUwNGZjZjlkNTdhNDViZCIsInVzZXJfaWQiOjEsImVtYWlsIjoic3RyaW5nQCIsImlhdCI6MTY4NTI5MzE0OCwibmJmIjoxNjg1MjkzMTQ4LCJleHAiOjE2ODUyOTQ5NDh9.c9RljW3YelKAYfPZDWPmpN5AlBZdcxFYWWb8zQM7_Jk');               
CREATE MEMORY TABLE "PUBLIC"."USER"(
    "CREATED_AT" TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    "ID" BIGINT NOT NULL,
    "UPDATED_AT" TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    "EMAIL" CHARACTER VARYING(255) NOT NULL,
    "PASSWORD_HASH" CHARACTER VARYING(255) NOT NULL,
    "ROLE" CHARACTER VARYING(255) NOT NULL,
    "USERNAME" CHARACTER VARYING(255) NOT NULL
);
ALTER TABLE "PUBLIC"."USER" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_27" PRIMARY KEY("ID");        
-- 1 +/- SELECT COUNT(*) FROM PUBLIC."USER";  
INSERT INTO "PUBLIC"."USER" VALUES
(NULL, 1, NULL, 'string@', '$2a$13$XomlEs9Bz/97hcv63ZZeBOz5kVM1S.PkX71WVIImEXkWT2cubltfi', 'chef', 'string');             
ALTER TABLE "PUBLIC"."USER" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_2" CHECK("ROLE" IN('customer', 'chef', 'manager')) NOCHECK;   
ALTER TABLE "PUBLIC"."USER" ADD CONSTRAINT "PUBLIC"."UKSB8BBOUER5WAK8VYIIY4PF2BX" UNIQUE("USERNAME");         
ALTER TABLE "PUBLIC"."USER" ADD CONSTRAINT "PUBLIC"."UKOB8KQYQQGMEFL0ACO34AKDTPE" UNIQUE("EMAIL");            
ALTER TABLE "PUBLIC"."SESSION" ADD CONSTRAINT "PUBLIC"."FK1BI1PMQJGIPW7DX3J6BL37DJA" FOREIGN KEY("USER_ID") REFERENCES "PUBLIC"."USER"("ID") NOCHECK;         
